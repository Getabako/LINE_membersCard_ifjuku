@tailwind base;
@tailwind components;
@tailwind utilities;

/* ベーススタイル */
@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  body {
    @apply bg-if-light text-if-dark antialiased;
    font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
  }

  /* Safe area対応 */
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* コンポーネントスタイル */
@layer components {
  /* ボタン */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-3 rounded-button font-semibold transition-all duration-200 min-h-touch;
  }

  .btn-primary {
    @apply btn bg-if-orange text-white hover:bg-if-orange-dark active:scale-[0.98];
  }

  .btn-secondary {
    @apply btn bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 active:scale-[0.98];
  }

  .btn-danger {
    @apply btn bg-error text-white hover:bg-red-600 active:scale-[0.98];
  }

  .btn-ghost {
    @apply btn bg-transparent text-if-orange hover:bg-if-orange/10;
  }

  /* カード */
  .card {
    @apply bg-white rounded-card shadow-card p-4;
  }

  .card-elevated {
    @apply card shadow-elevated;
  }

  /* ヘッダー */
  .header {
    @apply sticky top-0 z-50 bg-white border-b border-gray-200 px-4 py-3 flex items-center;
  }

  .header-title {
    @apply text-title flex-1 text-center;
  }

  /* 入力フィールド */
  .input {
    @apply w-full px-4 py-3 border border-gray-300 rounded-button text-body focus:outline-none focus:ring-2 focus:ring-if-orange/50 focus:border-if-orange;
  }

  /* タブ */
  .tab-bar {
    @apply flex gap-2 p-1 bg-gray-100 rounded-lg;
  }

  .tab-item {
    @apply flex-1 py-2 px-4 text-center rounded-md text-body transition-colors;
  }

  .tab-item-active {
    @apply tab-item bg-white text-if-dark font-semibold shadow-sm;
  }

  .tab-item-inactive {
    @apply tab-item text-gray-500 hover:text-gray-700;
  }

  /* リスト */
  .list-item {
    @apply flex items-center justify-between py-4 border-b border-gray-100 last:border-0;
  }

  /* バッジ */
  .badge {
    @apply inline-flex items-center px-2 py-1 rounded-full text-caption font-medium;
  }

  .badge-bronze {
    @apply badge bg-rank-bronze/10 text-rank-bronze;
  }

  .badge-silver {
    @apply badge bg-rank-silver/20 text-gray-600;
  }

  .badge-gold {
    @apply badge bg-rank-gold/10 text-rank-gold;
  }

  .badge-platinum {
    @apply badge bg-rank-platinum/30 text-gray-700;
  }

  /* ポイント表示 */
  .points-display {
    @apply text-points text-if-orange font-bold;
  }

  .points-positive {
    @apply text-success font-semibold;
  }

  .points-negative {
    @apply text-error font-semibold;
  }

  /* カレンダー */
  .calendar-grid {
    @apply grid grid-cols-7 gap-1 text-center;
  }

  .calendar-day {
    @apply w-10 h-10 flex items-center justify-center rounded-full text-body transition-colors;
  }

  .calendar-day-active {
    @apply calendar-day hover:bg-gray-100 cursor-pointer;
  }

  .calendar-day-selected {
    @apply calendar-day bg-if-orange text-white;
  }

  .calendar-day-disabled {
    @apply calendar-day text-gray-300 cursor-not-allowed;
  }

  .calendar-day-today {
    @apply calendar-day border border-if-orange;
  }

  /* タイムスロット */
  .time-slot {
    @apply px-4 py-3 rounded-button text-center text-body transition-all;
  }

  .time-slot-available {
    @apply time-slot bg-white border border-gray-300 hover:border-if-orange cursor-pointer;
  }

  .time-slot-selected {
    @apply time-slot bg-if-orange text-white;
  }

  .time-slot-full {
    @apply time-slot bg-gray-100 text-gray-400 cursor-not-allowed;
  }

  /* モーダル */
  .modal-overlay {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in;
  }

  .modal-content {
    @apply bg-white rounded-card p-6 max-w-sm w-full animate-slide-up;
  }

  /* ローディング */
  .loading-spinner {
    @apply w-8 h-8 border-4 border-if-orange/30 border-t-if-orange rounded-full animate-spin;
  }
}

/* ユーティリティ */
@layer utilities {
  /* スクロール関連 */
  .scroll-hidden {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scroll-hidden::-webkit-scrollbar {
    display: none;
  }

  /* テキスト省略 */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }

  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  /* タッチフィードバック */
  .touch-feedback {
    @apply active:opacity-70 transition-opacity;
  }
}

/* サイバーパンク風スタイル */
.cyber-bg {
  background: linear-gradient(135deg, #0a0a1a 0%, #1a0a2e 25%, #0a1628 50%, #1a0a2e 75%, #0a0a1a 100%);
  position: relative;
  overflow: hidden;
}

.cyber-bg::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px),
    radial-gradient(circle at 50% 50%, rgba(0, 200, 255, 0.1) 0%, transparent 50%);
  background-size: 30px 30px, 30px 30px, 100% 100%;
  pointer-events: none;
}

.cyber-bg::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background:
    radial-gradient(ellipse at top, rgba(0, 150, 255, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at bottom, rgba(128, 0, 255, 0.1) 0%, transparent 50%);
  pointer-events: none;
}

/* ネオンテキスト効果 */
.neon-text {
  color: #00f0ff;
  text-shadow:
    0 0 5px #00f0ff,
    0 0 10px #00f0ff,
    0 0 20px #00f0ff,
    0 0 40px #0080ff;
}

.neon-text-orange {
  color: #ff6b00;
  text-shadow:
    0 0 5px #ff6b00,
    0 0 10px #ff6b00,
    0 0 20px #ff6b00;
}

/* サイバーボーダー */
.cyber-border {
  border: 1px solid rgba(0, 240, 255, 0.3);
  box-shadow:
    0 0 10px rgba(0, 240, 255, 0.2),
    inset 0 0 10px rgba(0, 240, 255, 0.05);
  background: rgba(0, 20, 40, 0.6);
  backdrop-filter: blur(10px);
}

.cyber-border-orange {
  border: 1px solid rgba(255, 107, 0, 0.5);
  box-shadow:
    0 0 10px rgba(255, 107, 0, 0.3),
    inset 0 0 10px rgba(255, 107, 0, 0.05);
  background: rgba(40, 20, 0, 0.6);
  backdrop-filter: blur(10px);
}

/* サイバーカード */
.cyber-card {
  background: linear-gradient(135deg, rgba(0, 30, 60, 0.8) 0%, rgba(0, 20, 40, 0.9) 100%);
  border: 1px solid rgba(0, 240, 255, 0.2);
  border-radius: 12px;
  box-shadow:
    0 0 20px rgba(0, 240, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  position: relative;
  overflow: hidden;
}

.cyber-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.5), transparent);
}

/* サイバーボタン */
.cyber-button {
  background: transparent;
  border: 2px solid #00f0ff;
  color: #00f0ff;
  padding: 12px 24px;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 2px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow:
    0 0 10px rgba(0, 240, 255, 0.3),
    inset 0 0 10px rgba(0, 240, 255, 0.1);
}

.cyber-button:hover {
  background: rgba(0, 240, 255, 0.1);
  box-shadow:
    0 0 20px rgba(0, 240, 255, 0.5),
    inset 0 0 20px rgba(0, 240, 255, 0.2);
}

.cyber-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.3), transparent);
  transition: left 0.5s ease;
}

.cyber-button:hover::before {
  left: 100%;
}

/* グロー効果付きQRコード背景 */
.qr-container {
  background: linear-gradient(135deg, #001a33 0%, #002244 100%);
  border: 1px solid rgba(0, 240, 255, 0.3);
  box-shadow:
    0 0 15px rgba(0, 240, 255, 0.2),
    inset 0 0 30px rgba(0, 100, 200, 0.1);
}

/* アニメーション */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 10px rgba(0, 240, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(0, 240, 255, 0.6);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes scan-line {
  0% {
    top: -100%;
  }
  100% {
    top: 100%;
  }
}

.scan-line::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.5), transparent);
  animation: scan-line 3s linear infinite;
}
